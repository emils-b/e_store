(function(){"use strict";var t={722:function(t,e,r){var a=r(144),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("MainView")],1)},o=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("EStoreHeader"),e("section",[e("div",{staticClass:"container my-5"},[t._m(0),t.hasError?e("div",[e("h5",[t._v("Could not retrieve all products. Please try later!")])]):e("div",{staticClass:"row"},t._l(t.products,(function(t){return e("EStoreProduct",{key:t.id,attrs:{pProduct:t}})})),1)])]),e("EStoreFooter")],1)},c=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"mb-4"},[e("h3",[t._v("Products")])])}],i=r(374);const l="api/products";class u{static async buy(t,e){try{return await i.Z.post(l+"/buy",null,{params:{sku:t,amount:e}})}catch(r){console.error(r)}}static async checkAvailability(t){try{return await i.Z.post(l+"/product",null,{params:{sku:t}})}catch(e){console.error(e)}}static async deleteAllProducts(){try{return await i.Z.delete(l+"/products")}catch(t){console.error(t)}}static async updateAllProducts(){try{return await i.Z.post(l+"/products")}catch(t){console.error(t)}}static async getAllProducts(){try{return await i.Z.get(l+"/all")}catch(t){console.error(t)}}}var d=u,p=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom"},[e("span",{staticClass:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none fs-4"},[t._v("E-Store System")]),e("div",{staticClass:"float-left"},[e("button",{staticClass:"btn btn-danger",staticStyle:{margin:"5px"},attrs:{type:"button"},on:{click:t.deleteAllProducts}},[t._v(" Delete all products ")]),e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.updateAllProducts}},[t._v(" Update all products ")])])])])},f=[],m={name:"EStoreHeader",methods:{async deleteAllProducts(){const t=await d.deleteAllProducts();t.data.success?location.reload():window.alert(t.data.message)},async updateAllProducts(){const t=await d.updateAllProducts();t.data.success?location.reload():window.alert(t.data.message)}}},v=m,h=r(1),y=(0,h.Z)(v,p,f,!1,null,"79af0693",null),b=y.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-3 col-md-6 col-sm-6 d-flex"},[e("div",{staticClass:"card w-100 my-2 shadow-2-strong"},[e("div",{staticClass:"card-body d-flex flex-column"},[t.hasError?e("h6",{staticStyle:{color:"red"}},[t._v(" Could not update product info ")]):t._e(),e("h5",{staticClass:"card-title"},[t._v(t._s(t.product.name))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.product.description))]),e("p",{staticClass:"card-text"},[t._v("Available: "+t._s(t.product.amount))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.product.price)+" EUR")]),e("div",{staticClass:"card-footer align-items-end"},[e("div",{staticClass:"col-12"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.selectedAmount,expression:"selectedAmount",modifiers:{number:!0}}],staticClass:"col-3",staticStyle:{margin:"5px"},attrs:{placeholder:"Product amount",type:"number",min:"0",value:"1",oninput:"validity.valid||(value='');"},domProps:{value:t.selectedAmount},on:{input:function(e){e.target.composing||(t.selectedAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.canBuy},on:{click:t.buy}},[t._v(" Buy ")])]),e("div",{staticClass:"col-12 pt-2"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.checkAvailability}},[t._v(" Ckeck availability ")])])])])])])},w=[],g={name:"EStoreProduct",props:{pProduct:{type:Object,required:!0}},data(){return{selectedAmount:0,product:this.pProduct,hasError:!1}},computed:{canBuy(){return!!this.selectedAmount}},methods:{async buy(){if(this.selectedAmount>this.product.amount)return void window.alert("You can not select more products then currently available");const t=await d.buy(this.product.sku,this.selectedAmount);t.data.success?location.reload():this.hasError=!0},async checkAvailability(){const t=await d.checkAvailability(this.product.sku);t.data.success?(this.hasError=!1,this.product.amount=t.data.amount):this.hasError=!0}}},C=g,x=(0,h.Z)(C,_,w,!1,null,null,null),A=x.exports,P=function(){var t=this;t._self._c;return t._m(0)},k=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"text-center text-lg-start text-muted mt-3",staticStyle:{"background-color":"#f5f5f5"}},[e("div",{staticClass:"col-md-5 offset-md-1 mb-3 pt-3",staticStyle:{width:"100%",height:"10rem"}},[e("h5",[t._v("Created by Emīls Baškers")]),e("p",[t._v("Vidzeme University of Applied Sciences")]),e("p",[t._v("Project for e-Business Systems course")])])])}],S={name:"EStoreFooter",data(){return{}},methods:{}},E=S,O=(0,h.Z)(E,P,k,!1,null,null,null),j=O.exports,Z={name:"MainView",components:{EStoreHeader:b,EStoreProduct:A,EStoreFooter:j},data(){return{products:[],hasError:!1}},mounted(){this.loadData()},methods:{async loadData(){const t=await d.getAllProducts();t.data.success?this.products=t.data.results:this.hasError=!0}}},B=Z,M=(0,h.Z)(B,n,c,!1,null,"1838b9cf",null),T=M.exports,F={name:"App",components:{MainView:T}},U=F,V=(0,h.Z)(U,s,o,!1,null,null,null),D=V.exports,H=r(657),$=r(17);r(24);a["default"].use(H.XG7),a["default"].use($.A7),a["default"].config.productionTip=!1,new a["default"]({render:t=>t(D)}).$mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,o){if(!a){var n=1/0;for(u=0;u<t.length;u++){a=t[u][0],s=t[u][1],o=t[u][2];for(var c=!0,i=0;i<a.length;i++)(!1&o||n>=o)&&Object.keys(r.O).every((function(t){return r.O[t](a[i])}))?a.splice(i--,1):(c=!1,o<n&&(n=o));if(c){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,s,o]}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,n=a[0],c=a[1],i=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(i)var u=i(r)}for(e&&e(a);l<n.length;l++)o=n[l],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(u)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(722)}));a=r.O(a)})();
//# sourceMappingURL=app.1bfcfd7d.js.map